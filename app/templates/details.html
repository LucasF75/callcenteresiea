{% extends "base.html" %}

{% block title %}{{ book.title }} - ReadList{% endblock %}

{% block content %}
    <div class="login-section">
        <div class="login-box" style="max-width:600px;">
            <div class="title">{{ book.title }}</div>
            <p><strong>Auteur(s):</strong> {{ book.authors | join(', ') }}</p>
            {% if book.thumbnail %}
            <img src="{{ book.thumbnail }}" alt="couverture" style="max-width:200px; margin-bottom: 1em;">
            {% endif %}
            <p>{{ book.description | safe }}</p>

            <form method="POST" action="{{ url_for('main.save_book', book_id=book.id) }}" style="display:inline;">
                {% if is_saved %}
                <button type="submit" name="action" value="delete">Supprimer des enregistrements</button>
                {% else %}
                <button type="submit" name="action" value="save">Enregistrer</button>
                {% endif %}
            </form>

            <form method="POST" action="{{ url_for('main.like_book', book_id=book.id) }}" style="display:inline;">
                {% if liked %}
                <button type="submit" name="action" value="unlike">üíî Unlike</button>
                {% else %}
                <button type="submit" name="action" value="like">‚ù§Ô∏è Like</button>
                {% endif %}
            </form>

            <div style="margin-top:2em;">
                <h3>Commentaires</h3>
                <form method="POST" action="{{ url_for('main.comment_book', book_id=book.id) }}">
                    <textarea name="comment" class="input-field" style="width:100%;" required></textarea><br>
                    <button type="submit">Envoyer</button>
                </form>
                <ul>
                    {% for comment in comments %}
                    <li><strong>{{ comment.user.name }}</strong> : {{ comment.content }}</li>
                    {% endfor %}
                </ul>
            </div>

            <button onclick="window.history.back()" style="margin-top:1em;">Retour</button>
        </div>
    </div>
    {% endblock %}

